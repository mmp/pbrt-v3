branches:
  only:
    - appVeyor

#
#	Travis-CI Platform selecion
#

os: osx
language: objective-c
compiler: clang

#os: linux
#language: cpp
#compiler: gcc

sudo: required

before_install:
  - echo $TRAVIS_OS_NAME
  - if [ $TRAVIS_OS_NAME == osx ]; then clang --version; fi
  - if [ $TRAVIS_OS_NAME == linux ]; then gcc --version; fi

install:
  - if [ $TRAVIS_OS_NAME == linux ]; then sudo add-apt-repository ppa:ubuntu-toolchain-r/test -y; fi
  - if [ $TRAVIS_OS_NAME == linux ]; then sudo apt-get update -qq; fi
  - if [ $TRAVIS_OS_NAME == linux ]; then sudo apt-get install -qq g++-4.8; fi
  - if [ $TRAVIS_OS_NAME == linux ]; then export CXX="g++-4.8" CC="gcc-4.8"; fi
  - if [ $TRAVIS_OS_NAME == linux ]; then sudo update-alternatives --install /usr/bin/g++ g++ /usr/bin/g++-4.8 90; fi

before_script:
  - rm src/core/unistd.h
  - cd src/build
  - if [ $TRAVIS_OS_NAME == osx ]; then mkdir osx && cd osx; fi
  - if [ $TRAVIS_OS_NAME == linux ]; then mkdir linux && cd linux; fi
  - cmake -G "Unix Makefiles" ../..

script:
  - make
  - ./pbrt_test


